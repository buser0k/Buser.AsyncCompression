# История изменений

Все значимые изменения в проекте Buser.AsyncCompression будут документированы в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
и проект следует [Semantic Versioning](https://semver.org/spec/v2.0.0.html).

## [2.0.0] - 2025-01-05

### Добавлено
- **Полная рефакторинг архитектуры** с применением DDD и SOLID принципов
- **Обновление до .NET 8** с современными возможностями языка
- **Dependency Injection** с использованием Microsoft.Extensions.DependencyInjection
- **Слоистая архитектура** с четким разделением на Domain, Application и Infrastructure слои
- **Доменные модели**:
  - `CompressionJob` - агрегат для управления задачами сжатия
  - `FileInfo` - value object для информации о файлах
  - `CompressionSettings` - value object для настроек сжатия
- **Новые интерфейсы**:
  - `ICompressionAlgorithm` - абстракция алгоритмов сжатия
  - `IFileService` - абстракция работы с файлами
  - `ICompressionService` - доменный сервис сжатия
  - `IProgressReporter` - абстракция отчетов о прогрессе
- **Application Services**:
  - `CompressionApplicationService` - координация операций
  - `CompressionService` - доменная логика сжатия
- **Фабрики**:
  - `CompressionJobFactory` - создание задач сжатия
  - `CompressionAlgorithmFactory` - создание алгоритмов
- **Infrastructure Services**:
  - `FileService` - реализация работы с файлами
  - `GZipCompressionAlgorithm` - реализация GZip алгоритма
- **Подробная документация**:
  - README.md с описанием проекта и архитектуры
  - ARCHITECTURE.md с детальным описанием архитектуры
  - TECHNICAL_SPECS.md с техническими спецификациями
  - EXAMPLES.md с примерами использования
- **Nullable reference types** для улучшения безопасности типов
- **Современный формат проекта** с PackageReference

### Изменено
- **Полная переработка Program.cs** для использования новой архитектуры
- **Обновление ProgressBar** для работы с новыми интерфейсами
- **Современный синтаксис C#** с использованием новых возможностей языка
- **Улучшенная обработка ошибок** с типизированными результатами

### Удалено
- **Устаревшие файлы конфигурации**:
  - packages.config (заменен на PackageReference)
  - App.config (не нужен для .NET 8)
  - AssemblyInfo.cs (автогенерируется)
- **Простой DI контейнер** (заменен на Microsoft.Extensions.DependencyInjection)

### Исправлено
- **Конфликты имен** между System.IO.FileInfo и доменным FileInfo
- **Проблемы с путями файлов** при использовании dotnet run
- **Нарушения SOLID принципов** в оригинальном коде
- **Отсутствие разделения ответственности** между компонентами

### Безопасность
- **Валидация входных данных** в value objects
- **Проверка существования файлов** перед обработкой
- **Безопасная работа с путями** файлов

## [1.0.0] - 2019-10-02

### Добавлено
- **Базовая функциональность сжатия** файлов
- **Асинхронная обработка** с использованием TPL Dataflow
- **Многопоточное сжатие** для повышения производительности
- **Интерактивное управление** процессом (пауза, возобновление, отмена)
- **Визуальный прогресс-бар** с анимацией
- **GZip алгоритм сжатия**
- **Консольный интерфейс** для управления процессом
- **Обработка ошибок** и исключений
- **Поддержка .NET Framework 4.8**

### Технические детали
- Использование `System.Threading.Tasks.Dataflow` для асинхронной обработки
- `BufferBlock`, `TransformBlock`, `ActionBlock` для создания пайплайна
- `ManualResetEvent` для управления паузой/возобновлением
- `CancellationToken` для отмены операций
- Обработка `AggregateException` и `OperationCanceledException`

---

## Планы на будущее

### [2.1.0] - Планируется
- **Поддержка множественных алгоритмов** сжатия (LZ4, Brotli, Zstandard)
- **Сжатие папок** и рекурсивная обработка
- **Конфигурационные файлы** для настроек
- **Логирование** с использованием Serilog
- **Метрики производительности** с Application Insights

### [2.2.0] - Планируется
- **REST API** для удаленного управления
- **Web UI** для веб-интерфейса
- **Планировщик задач** для автоматического сжатия
- **Поддержка облачных хранилищ** (Azure Blob, AWS S3)

### [3.0.0] - Планируется
- **Микросервисная архитектура**
- **Event Sourcing** для аудита операций
- **CQRS** для разделения команд и запросов
- **Message Queues** для асинхронной обработки
- **Containerization** с Docker
- **Kubernetes** для оркестрации

---

## Примечания по версионированию

- **MAJOR** версия увеличивается при несовместимых изменениях API
- **MINOR** версия увеличивается при добавлении функциональности с обратной совместимостью
- **PATCH** версия увеличивается при исправлении ошибок с обратной совместимостью

## Соглашения о коммитах

Проект использует [Conventional Commits](https://www.conventionalcommits.org/) для стандартизации сообщений коммитов:

- `feat:` новая функциональность
- `fix:` исправление ошибки
- `docs:` изменения в документации
- `style:` форматирование, отсутствующие точки с запятой и т.д.
- `refactor:` рефакторинг кода
- `test:` добавление тестов
- `chore:` изменения в процессе сборки или вспомогательных инструментах

## Лицензия

Проект создан в образовательных целях для демонстрации современных подходов к архитектуре .NET приложений.
